"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const http = require("http");
const url = require("url");
const ioBackend = require("socket.io");
const REQUEST_ID = '123456789';
let httpServerIo;
let httpServerIoAddr;
let httpServerBackend;
let httpServerBackendAddr;
let ioServer;
httpServerIo = http.createServer().listen();
httpServerIoAddr = httpServerIo.address();
ioServer = ioBackend(httpServerIo);
httpServerBackend = http.createServer((req, res) => {
    let body = '';
    req.on('data', (data) => {
        body += data;
    });
    req.on('end', () => {
        const data = {
            request: JSON.parse(body),
            headers: req.headers,
            params: url.parse(req.url, true).query,
        };
        ioServer.emit(`request-${REQUEST_ID}`, data);
    });
    res.writeHead(200, { 'Content-Type': 'application/json' });
    res.write(JSON.stringify({ success: true }));
    res.end();
}).listen();
httpServerBackendAddr = httpServerBackend.address();
//# sourceMappingURL=server.js.map